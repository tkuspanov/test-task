# MinIO инструкция


## Dockerfile 
Содержит инструкции, которые Docker использует для автоматической сборки образа **контейнера** на основе **ubuntu:20.04** с установкой на него сервиса MinIO. 

### Запуск Dockerfile
Для создания образа Docker-контейнет на основе Dockerfile, необходимо запустить команду docker build, указав путь к Dockerfile и тег для создаваемого образа: 

**"docker build -t **"Image_Name"**. 

В результате выполнения этой команды будет создан образ Docker с именем **"Image_Name"**, основанный на Dockerfile, находящемся в текущей директории (.) .

Для запуска контейнера нужно воспользоваться командой **"docker run ""Image_Name"**

Так же есть ключи для этой команды, наример; **-p** открыть порты в контейнере, **--name** название контейнера и др.

## docker-compose.yml

Ниже приведено пояснение к docker-compose.yml файлу, который настраивает контейнер для приложения Minio, использующего хранилище данных.

```sh
# Настройки сервисов Docker-контейнера
services:
  # Сервис для приложения minio
  minio:
    # Имя образа Docker
    image: "Image_Name" 
    # Имя контейнера
    container_name: minio
    # Порты, открытые в контейнере
    ports:
      - "9000:9000"  # HTTP порт minio
      - "9090:9090"  # Порт консоли
    # Переменные среды для конфигурации приложения minio
    environment:
      MINIO_ROOT_USER: minioadmin  # Имя пользователя администратора minio
      MINIO_ROOT_PASSWORD: minioadmin  # Пароль администратора minio
    # Примонтированные тома для хранения данных
    volumes:
      - data:/data  # Том для хранения данных minio
    # Команда запуска приложения minio
    command: minio server ~/minio --console-address :9090
    # Поведение контейнера при перезапуске
    restart: unless-stopped
# Конфигурация хранилища данных
volumes:
  # Том для хранения данных minio
  data:
  ```
Общая суть файла docker-compose.yml заключается в том, что он настраивает контейнер Docker для приложения minio, которое представляет собой хранилище данных с открытым исходным кодом. В нем определены следующие параметры:

Образ Docker для minio, определенный в строке **image: "Image_Name"**, можно воспользоваться оффициальным образом **"quay.io/minio/minio"**

Для запуска контейнера образом **"quay.io/minio/minio"** нужно изменить команду запуска приложения:

```sh
command: server /data --console-address ":9090"
```

Имя контейнера, установленное в строке **container_name: minio**.

Порты, на которых будет запущено приложение minio и консоль, определены в строке **ports**.

Переменные среды, которые будут использоваться для конфигурации приложения minio, определены в строке **environment**.

Примонтированные тома, которые будут использоваться для хранения данных minio, определены в строке **volumes**.

Команда запуска minio, которая будет выполнена при запуске контейнера, определена в строке **command**.

Поведение контейнера при перезапуске определено в строке **restart**, указанный параметр означает то что Docker-контейнер должен перезапускаться автоматически при его остановке, если только контейнер не был остановлен пользователем.

Конфигурация хранилища данных, которая определена в строке **volumes**, указывает куда будет смонтирован указанная директория на хосте. Если контейнер остановится то файлы будут в сохранности, так как хранятся на хостовой машине.

